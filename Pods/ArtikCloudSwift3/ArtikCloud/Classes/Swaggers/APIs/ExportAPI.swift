//
// ExportAPI.swift
//
// Generated by swagger-codegen
// https://github.com/swagger-api/swagger-codegen
//

import Alamofire
import PromiseKit



open class ExportAPI: APIBase {
    /**
     Create Export Request
     
     - parameter exportRequestInfo: (body) ExportRequest object that is passed in the body 
     - parameter completion: completion handler to receive the data and the error objects
     */
    open class func exportRequest(exportRequestInfo: ExportRequestInfo, completion: @escaping ((_ data: ExportRequestResponse?, _ error: Error?) -> Void)) {
        exportRequestWithRequestBuilder(exportRequestInfo: exportRequestInfo).execute { (response, error) -> Void in
            completion(response?.body, error);
        }
    }

    /**
     Create Export Request
     
     - parameter exportRequestInfo: (body) ExportRequest object that is passed in the body 
     - returns: Promise<ExportRequestResponse>
     */
    open class func exportRequest(exportRequestInfo: ExportRequestInfo) -> Promise<ExportRequestResponse> {
        let deferred = Promise<ExportRequestResponse>.pending()
        exportRequest(exportRequestInfo: exportRequestInfo) { data, error in
            if let error = error {
                deferred.reject(error)
            } else {
                deferred.fulfill(data!)
            }
        }
        return deferred.promise
    }

    /**
     Create Export Request
     - POST /messages/export
     - Export normalized messages. The following input combinations are supported:<br/><table><tr><th>Combination</th><th>Parameters</th><th>Description</th></tr><tr><td>Get by users</td><td>uids</td><td>Search by a list of User IDs. For each user in the list, the current authenticated user must have read access over the specified user.</td></tr><tr><td>Get by devices</td><td>sdids</td><td>Search by Source Device IDs.</td></tr><tr><td>Get by device types</td><td>uids,sdtids</td><td>Search by list of Source Device Type IDs for the given list of users.</td></tr><tr><td>Get by trial</td><td>trialId</td><td>Search by Trial ID.</td></tr><tr><td>Get by combination of parameters</td><td>uids,sdids,sdtids</td><td>Search by list of Source Device IDs. Each Device ID must belong to a Source Device Type ID and a User ID.</td></tr><tr><td>Common</td><td>startDate,endDate,order,format,url,csvHeaders</td><td>Parameters that can be used with the above combinations.</td></tr></table>
     - OAuth:
       - type: oauth2
       - name: artikcloud_oauth
     - examples: [{contentType=application/json, example={
  "data" : {
    "sdtids" : "aeiou",
    "trialId" : "aeiou",
    "sdids" : "aeiou",
    "endDate" : 123456789,
    "uids" : "aeiou",
    "format" : "aeiou",
    "exportId" : "aeiou",
    "startDate" : 123456789,
    "url" : "aeiou",
    "csvHeaders" : true,
    "order" : "aeiou"
  }
}}]
     
     - parameter exportRequestInfo: (body) ExportRequest object that is passed in the body 

     - returns: RequestBuilder<ExportRequestResponse> 
     */
    open class func exportRequestWithRequestBuilder(exportRequestInfo: ExportRequestInfo) -> RequestBuilder<ExportRequestResponse> {
        let path = "/messages/export"
        let URLString = ArtikCloudAPI.basePath + path
        
        let parameters = exportRequestInfo.encodeToJSON() as? [String:Any]
 
        let convertedParameters = APIHelper.convertBoolToString(parameters)
 
        let requestBuilder: RequestBuilder<ExportRequestResponse>.Type = ArtikCloudAPI.requestBuilderFactory.getBuilder()

        return requestBuilder.init(method: "POST", URLString: URLString, parameters: convertedParameters, isBody: true)
    }

    /**
     Get Export History
     
     - parameter trialId: (query) Filter by trialId. (optional)
     - parameter count: (query) Pagination count. (optional)
     - parameter offset: (query) Pagination offset. (optional)
     - parameter completion: completion handler to receive the data and the error objects
     */
    open class func getExportHistory(trialId: String? = nil, count: Int32? = nil, offset: Int32? = nil, completion: @escaping ((_ data: ExportHistoryResponse?, _ error: Error?) -> Void)) {
        getExportHistoryWithRequestBuilder(trialId: trialId, count: count, offset: offset).execute { (response, error) -> Void in
            completion(response?.body, error);
        }
    }

    /**
     Get Export History
     
     - parameter trialId: (query) Filter by trialId. (optional)
     - parameter count: (query) Pagination count. (optional)
     - parameter offset: (query) Pagination offset. (optional)
     - returns: Promise<ExportHistoryResponse>
     */
    open class func getExportHistory(trialId: String? = nil, count: Int32? = nil, offset: Int32? = nil) -> Promise<ExportHistoryResponse> {
        let deferred = Promise<ExportHistoryResponse>.pending()
        getExportHistory(trialId: trialId, count: count, offset: offset) { data, error in
            if let error = error {
                deferred.reject(error)
            } else {
                deferred.fulfill(data!)
            }
        }
        return deferred.promise
    }

    /**
     Get Export History
     - GET /messages/export/history
     - Get the history of export requests.
     - OAuth:
       - type: oauth2
       - name: artikcloud_oauth
     - examples: [{contentType=application/json, example={
  "total" : 123456789,
  "data" : {
    "exports" : [ {
      "request" : {
        "sdtids" : "aeiou",
        "trialId" : "aeiou",
        "sdids" : "aeiou",
        "endDate" : 123456789,
        "uids" : "aeiou",
        "format" : "aeiou",
        "startDate" : 123456789,
        "order" : "aeiou"
      },
      "fileSize" : 123456789,
      "totalMessages" : 123456789,
      "exportId" : "aeiou",
      "expirationDate" : 123456789,
      "md5" : "aeiou",
      "status" : "aeiou"
    } ]
  },
  "offset" : 123456789,
  "count" : 123456789
}}]
     
     - parameter trialId: (query) Filter by trialId. (optional)
     - parameter count: (query) Pagination count. (optional)
     - parameter offset: (query) Pagination offset. (optional)

     - returns: RequestBuilder<ExportHistoryResponse> 
     */
    open class func getExportHistoryWithRequestBuilder(trialId: String? = nil, count: Int32? = nil, offset: Int32? = nil) -> RequestBuilder<ExportHistoryResponse> {
        let path = "/messages/export/history"
        let URLString = ArtikCloudAPI.basePath + path

        let nillableParameters: [String:Any?] = [
            "trialId": trialId,
            "count": count?.encodeToJSON(),
            "offset": offset?.encodeToJSON()
        ]
 
        let parameters = APIHelper.rejectNil(nillableParameters)
 
        let convertedParameters = APIHelper.convertBoolToString(parameters)
 
        let requestBuilder: RequestBuilder<ExportHistoryResponse>.Type = ArtikCloudAPI.requestBuilderFactory.getBuilder()

        return requestBuilder.init(method: "GET", URLString: URLString, parameters: convertedParameters, isBody: false)
    }

    /**
     Get Export Result
     
     - parameter exportId: (path) Export ID of the export query. 
     - parameter completion: completion handler to receive the data and the error objects
     */
    open class func getExportResult(exportId: String, completion: @escaping ((_ data: String?, _ error: Error?) -> Void)) {
        getExportResultWithRequestBuilder(exportId: exportId).execute { (response, error) -> Void in
            completion(response?.body, error);
        }
    }

    /**
     Get Export Result
     
     - parameter exportId: (path) Export ID of the export query. 
     - returns: Promise<String>
     */
    open class func getExportResult(exportId: String) -> Promise<String> {
        let deferred = Promise<String>.pending()
        getExportResult(exportId: exportId) { data, error in
            if let error = error {
                deferred.reject(error)
            } else {
                deferred.fulfill(data!)
            }
        }
        return deferred.promise
    }

    /**
     Get Export Result
     - GET /messages/export/{exportId}/result
     - Retrieve result of the export query in tgz format. The tar file may contain one or more files with the results.
     - OAuth:
       - type: oauth2
       - name: artikcloud_oauth
     - examples: [{contentType=application/json, example="aeiou"}]
     
     - parameter exportId: (path) Export ID of the export query. 

     - returns: RequestBuilder<String> 
     */
    open class func getExportResultWithRequestBuilder(exportId: String) -> RequestBuilder<String> {
        var path = "/messages/export/{exportId}/result"
        path = path.replacingOccurrences(of: "{exportId}", with: "\(exportId)", options: .literal, range: nil)
        let URLString = ArtikCloudAPI.basePath + path

        let requestBuilder: RequestBuilder<String>.Type = ArtikCloudAPI.requestBuilderFactory.getBuilder()

        return requestBuilder.init(method: "GET", URLString: URLString, parameters: nil, isBody: true)
    }

    /**
     Check Export Status
     
     - parameter exportId: (path) Export ID of the export query. 
     - parameter completion: completion handler to receive the data and the error objects
     */
    open class func getExportStatus(exportId: String, completion: @escaping ((_ data: ExportStatusResponse?, _ error: Error?) -> Void)) {
        getExportStatusWithRequestBuilder(exportId: exportId).execute { (response, error) -> Void in
            completion(response?.body, error);
        }
    }

    /**
     Check Export Status
     
     - parameter exportId: (path) Export ID of the export query. 
     - returns: Promise<ExportStatusResponse>
     */
    open class func getExportStatus(exportId: String) -> Promise<ExportStatusResponse> {
        let deferred = Promise<ExportStatusResponse>.pending()
        getExportStatus(exportId: exportId) { data, error in
            if let error = error {
                deferred.reject(error)
            } else {
                deferred.fulfill(data!)
            }
        }
        return deferred.promise
    }

    /**
     Check Export Status
     - GET /messages/export/{exportId}/status
     - Check status of the export query.
     - OAuth:
       - type: oauth2
       - name: artikcloud_oauth
     - examples: [{contentType=application/json, example={
  "exportId" : "aeiou",
  "ttl" : "aeiou",
  "expirationDate" : 123456789,
  "md5" : "aeiou",
  "status" : "aeiou"
}}]
     
     - parameter exportId: (path) Export ID of the export query. 

     - returns: RequestBuilder<ExportStatusResponse> 
     */
    open class func getExportStatusWithRequestBuilder(exportId: String) -> RequestBuilder<ExportStatusResponse> {
        var path = "/messages/export/{exportId}/status"
        path = path.replacingOccurrences(of: "{exportId}", with: "\(exportId)", options: .literal, range: nil)
        let URLString = ArtikCloudAPI.basePath + path

        let requestBuilder: RequestBuilder<ExportStatusResponse>.Type = ArtikCloudAPI.requestBuilderFactory.getBuilder()

        return requestBuilder.init(method: "GET", URLString: URLString, parameters: nil, isBody: true)
    }

}
